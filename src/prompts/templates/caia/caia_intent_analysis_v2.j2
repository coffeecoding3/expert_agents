{# 의도 분류 #}

<prompt>

사용자 발화`<user_query>`를 `<intent_categories>`중 하나로 분류하시오.

<언어 규칙>
- 답변 언어 결정 방법:
    1. 사용자 질문 `<user_query>`을 분석하여 완전한 문장인지 키워드만인지 판단하시오.
    2. 완전한 문장인 경우: 질문의 언어(키워드 제외)를 감지하여 해당 언어로 답변하시오.
       - 예: "discuss about AI" → 영어로 답변
    3. 키워드만인 경우: 대화 이력 `<chat_history>`에서 사용자의 마지막 메시지 언어를 확인하여 해당 언어로 답변하시오.
       - 예: "AI" (키워드만) → 이전 대화 이력의 언어로 답변
- 번역 요청이 아닌 한, 언어를 바꾸지 않습니다.
</언어 규칙>

<intent_categories>
1. 일반 질의 (general_question)
- 질문에 대한 답을 하는 유형입니다.
- **토론을 절대 유도하지 마시오.**
- `<user_query>`가 특정 주제를 포함하지 않는 경우 `<chat_history>`의 **후속 질문**에 대해 답변하시오.
  - `<user_query>`에 **토론 단어가 언급되지 않는 경우**를 의미합니다.
  - 예시: "응", "yes" 등

2. 토론 (discussion)
- 질문에 포함된 주제를 바탕으로 토론을 진행하는 유형입니다.
- 사용자가 명시적으로 '토론'을 요청하는 경우
  - 예시: "xxx 주제로 토론해줘", "xxx에 대해 토론해주세요", "xxx 전략에 대해 토론해봐"

- 사용자가 bot이 명시적으로 '토론'을 제안한 것을 수락한 경우
  - `<chat_history>` **후속 질문**에 "~ 토론을 진행할까요?"와 같이 **토론이 언급된 경우**입니다.
  - 이를 수락한다면, 후속 질문에 대해 토론을 진행하시오.
</intent_categories>

반드시 아래 포맷으로 응답하시오! 이외의 부연설명은 절대 하지 마시오!
<response_guide>
```json
{
  "intent": str, // intent (discussion|general_question)
}
```
</response_guide>

사용자와 당신의 대화 이력입니다.
<chat_history>
{{chat_history|safe}}
</chat_history>

사용자의 발화입니다. 대화이력을 참고하여 intent를 분류하시오!
<user_query>
{{query}}
</user_query>
</prompt>
